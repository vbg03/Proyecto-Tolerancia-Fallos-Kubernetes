<div align="center">

# ğŸš€ Proyecto de Tolerancia a Fallos en Kubernetes

ğŸ’» **Sistema de microservicios resiliente con Flask, Kubernetes e Istio**  
Implementando patrones como **Circuit Breaker, Retry, Failover, Auto-Scaling** y **Chaos Engineering**  

![Kubernetes](https://img.shields.io/badge/Kubernetes-326CE5?logo=kubernetes&logoColor=white)
![Flask](https://img.shields.io/badge/Flask-000000?logo=flask&logoColor=white)
![Istio](https://img.shields.io/badge/Istio-466BB0?logo=istio&logoColor=white)
![Prometheus](https://img.shields.io/badge/Prometheus-E6522C?logo=prometheus&logoColor=white)
![Grafana](https://img.shields.io/badge/Grafana-F46800?logo=grafana&logoColor=white)

</div>

---

## ğŸ“‹ DescripciÃ³n del Proyecto

Este proyecto implementa una aplicaciÃ³n distribuida de **e-commerce** con tres microservicios principales:  
ğŸ§â€â™‚ï¸ **Usuarios**, ğŸ“¦ **Productos** y ğŸ§¾ **Ã“rdenes**, mÃ¡s un **frontend web** y una **base de datos MySQL**.  
Todo estÃ¡ orquestado con **Kubernetes** y configurado con patrones de **alta disponibilidad y resiliencia**.

---

## ğŸ—ï¸ Arquitectura

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚
â”‚   (Flask)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â”‚
â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users API  â”‚   â”‚ Products APIâ”‚   â”‚  Orders API  â”‚
â”‚  (Flask)   â”‚   â”‚   (Flask)   â”‚   â”‚   (Flask)    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    MySQL    â”‚
â”‚   Database  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

````

---

## âœ¨ CaracterÃ­sticas

âœ… **Self-healing** â€“ Kubernetes reinicia automÃ¡ticamente pods fallidos  
âš™ï¸ **Auto-scaling** â€“ HPA escala pods segÃºn uso de CPU  
ğŸ§± **Circuit Breaker** â€“ Previene cascadas de fallos con Istio  
ğŸ” **Retry Policy** â€“ Reintenta requests fallidos automÃ¡ticamente  
ğŸ’“ **Health Checks** â€“ Liveness y Readiness probes  
ğŸ“Š **Monitoreo** â€“ Prometheus + Grafana + Kiali  
ğŸ’¥ **Chaos Engineering** â€“ Scripts para simular fallos  

---

## ğŸ› ï¸ Requisitos Previos

### ğŸ’» Hardware MÃ­nimo
| Recurso | Requisito |
|----------|------------|
| CPU | 4 cores (Intel i5 o superior) |
| RAM | 16 GB (8 GB para VM, 8 GB para host) |
| Disco | 20 GB libres |

### ğŸ§° Software Necesario
- **VirtualBox** â‰¥ 6.1  
- **Vagrant** â‰¥ 2.2  
- **Git**

---

## âš™ï¸ InstalaciÃ³n y ConfiguraciÃ³n

### ğŸ§© Paso 1: Clonar el Repositorio
```bash
git clone <url-del-repositorio>
cd <nombre-del-proyecto>
````

### ğŸ§© Paso 2: Levantar la MÃ¡quina Virtual

```bash
vagrant up
```

Esto crearÃ¡ una VM Ubuntu con Docker, kubectl, Minikube y Helm preconfigurados.
â±ï¸ *Tiempo estimado: 15-20 minutos.*

### ğŸ§© Paso 3: Conectarse a la VM

```bash
vagrant ssh
```

### ğŸ§© Paso 4: Verificar la InstalaciÃ³n

```bash
minikube status
kubectl get nodes
```

DeberÃ­as ver algo como:

```
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   5m    v1.28.3
```

---

## ğŸš€ Despliegue de la AplicaciÃ³n

### ğŸ§± Construir las ImÃ¡genes Docker

```bash
cd /vagrant
eval $(minikube docker-env)
docker build -t users-api:latest ./microUsers
docker build -t products-api:latest ./microProductos
docker build -t orders-api:latest ./microOrders
docker build -t frontend:latest ./frontend
```

### ğŸ—„ï¸ Desplegar MySQL

```bash
kubectl apply -f k8s/base/mysql-deployment.yaml
kubectl wait --for=condition=ready pod -l app=mysql --timeout=300s
```

### ğŸ§© Desplegar los Microservicios

```bash
kubectl apply -f k8s/base/users-deployment.yaml
kubectl apply -f k8s/base/products-deployment.yaml
kubectl apply -f k8s/base/orders-deployment.yaml
kubectl apply -f k8s/base/frontend-deployment.yaml
kubectl get pods
```

---

## ğŸŒ Acceso a la AplicaciÃ³n

| Servicio        | URL                                                                                  |
| --------------- | ------------------------------------------------------------------------------------ |
| ğŸ–¥ï¸ Frontend    | [http://192.168.100.10:30080](http://192.168.100.10:30080)                           |
| ğŸ‘¥ Users API    | [http://192.168.100.10:30002/api/users](http://192.168.100.10:30002/api/users)       |
| ğŸ“¦ Products API | [http://192.168.100.10:30003/api/products](http://192.168.100.10:30003/api/products) |
| ğŸ§¾ Orders API   | [http://192.168.100.10:30004/api/orders](http://192.168.100.10:30004/api/orders)     |

### ğŸ” Credenciales de Prueba

```
Usuario: juan     ContraseÃ±a: 123
Usuario: maria    ContraseÃ±a: 456
```

---

## ğŸ“Š Monitoreo y Observabilidad

### Instalar Istio

```bash
curl -L https://istio.io/downloadIstio | sh -
cd istio-*
export PATH=$PWD/bin:$PATH
istioctl install --set profile=demo -y
kubectl label namespace default istio-injection=enabled
```

### Instalar Prometheus, Grafana y Kiali

```bash
cd /vagrant
chmod +x setup-monitoring.sh
./setup-monitoring.sh
```

| Dashboard     | Acceso                                                     |
| ------------- | ---------------------------------------------------------- |
| ğŸ“ˆ Prometheus | [http://192.168.100.10:9090](http://192.168.100.10:9090)   |
| ğŸ“Š Grafana    | [http://192.168.100.10:3000](http://192.168.100.10:3000)   |
| ğŸ•¸ï¸ Kiali     | [http://192.168.100.10:20001](http://192.168.100.10:20001) |

---

## ğŸ§ª Pruebas de Tolerancia a Fallos

### Script AutomÃ¡tico

```bash
chmod +x test-fault-tolerance.sh
./test-fault-tolerance.sh
```

Incluye pruebas de:

* Self-healing
* Auto-scaling
* Fallo de base de datos
* Circuit Breaker
* Retry policy

### Chaos Monkey

```bash
chmod +x chaos-monkey.sh
./chaos-monkey.sh
```

Simula:

* EliminaciÃ³n aleatoria de pods
* Fallos dirigidos
* Modos de caos continuo

---

## ğŸ› SoluciÃ³n de Problemas

ğŸ’¥ **Pods no inician**

```bash
kubectl describe pod <nombre>
kubectl logs <nombre>
```

ğŸ”’ **No se puede acceder a la app**

```bash
kubectl get svc
kubectl get pods
```

ğŸ—„ï¸ **MySQL no responde**

```bash
kubectl logs -l app=mysql
kubectl get pvc
```

ğŸ”¥ **Minikube sin recursos**

```bash
minikube delete
minikube start --memory=8192 --cpus=4
```

---

## ğŸ“‚ Estructura del Proyecto

```
.
â”œâ”€â”€ frontend/                 # Interfaz web (Flask)
â”œâ”€â”€ microUsers/               # API de usuarios
â”œâ”€â”€ microProductos/           # API de productos
â”œâ”€â”€ microOrders/              # API de Ã³rdenes
â”œâ”€â”€ k8s/
â”‚   â”œâ”€â”€ base/                 # Manifiestos principales
â”‚   â”œâ”€â”€ monitoring/           # ConfiguraciÃ³n de monitoreo
â”‚   â””â”€â”€ chaos/                # Experimentos de caos
â”œâ”€â”€ Vagrantfile
â”œâ”€â”€ setup-k8s.sh
â”œâ”€â”€ setup-monitoring.sh
â”œâ”€â”€ chaos-monkey.sh
â””â”€â”€ test-fault-tolerance.sh
```

---

## ğŸ TL;DR (Inicio RÃ¡pido)

```bash
vagrant up && vagrant ssh
cd /vagrant
eval $(minikube docker-env)
docker build -t users-api:latest ./microUsers
docker build -t products-api:latest ./microProductos
docker build -t orders-api:latest ./microOrders
docker build -t frontend:latest ./frontend
kubectl apply -f k8s/base/
```

ğŸ‰ **Frontend disponible en:** [http://192.168.100.10:30080](http://192.168.100.10:30080)

---

<div align="center">

ğŸ’¡ *Proyecto desarrollado con â¤ï¸ por estudiantes de IngenierÃ­a Multimedia*
ğŸ“¬ Â¿Tienes dudas o sugerencias? Â¡Abre un issue o contribuye al repositorio!

</div>
```